(()=>{let e=[];const t=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),n=e=>`${new Intl.DateTimeFormat("en-US",{month:"long"}).format(e)} ${e.getDate()}, ${e.getFullYear()}`,o=e=>{let t="../images/default-pfp.jpeg";return e.name&&(t="/image/"+e.name),t};function r(){document.querySelector(".allForum").style.display="flex",document.querySelector("#spinner").style.display="none"}async function l(){const e=function(){let e=window.location.search.split("?")[1];if(!e)return null;let t=e.split("&")[0].split("=")[1];return t}();let p=0;p=document.querySelectorAll("#post").length;let y=(()=>{document.querySelector("#sorting").style.display="block";let e=document.querySelector("#sortClicked").innerHTML;return"Newest"!=e&&"Popular"!=e&&"Most Liked"!=e?"Newest":e})();const h=new FormData;if(h.append("loadedPosts",p),h.append("sortType",y),document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("#spinner").style.display="flex";try{document.querySelector(".allForum").style.display="none"}catch(e){console.log(e)}})),e){const l=new FormData;l.append("id",e),fetch("api/forum/loadPost",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}).then((e=>e.json())).then((e=>{e.status?(!function(e,r,l){const{_id:d,title:p,message:y,username:h,postDate:v,uID:S,likes:L,likesCount:b,comments:B,commentsCount:E,images:T,type:x}=e;let C=document.createElement("div"),M=new Date(v),$="../images/default-pfp.jpeg";l&&($=`/image/${l.name}`);(function(e){switch(e){case"post":document.querySelector(".backBtn").href="/forum",document.querySelector("#forumPageTitle").innerHTML="Forums",document.title="Forum | Long X Ranch Cowboys";break;case"devotion":document.querySelector(".backBtn").href="/devotions",document.querySelector("#forumPageTitle").innerHTML="Daily Devotions",document.title="Daily Devotions | Long X Ranch Cowboys";break;case"story":document.querySelector(".backBtn").href="/cowboyStories",document.querySelector("#forumPageTitle").innerHTML="Cowboy Stories",document.title="Cowboy Stories | Long X Ranch Cowboys"}})(x),document.querySelector(".backBtn").style.display="flex",document.querySelector("#sorting").style.display="none",C.innerHTML=`<div id="post">\n\t\t<span class="line"></span>\n\t\t<div class="forumPost" id=${d}>\n\t\t<div class="inlineForumUser">\n\t\t\t<img id="postPfp" class="forumPfp" src="${$}"></img>\n\t\t\t<a class="forumUser" href="/profile?uid=${S}">${t(h)}</a>\n\t\t\t<p id="forumDate" class="forumUser"><i class="fa-solid fa-circle"></i> ${n(M)}</p>\n\t\t</div>\n\t\t\n\t\t<div class="forumTitle">\n\t\t\t<h3><a id="title">${t(p)}</a></h3>\n\t\t</div>\n\t\t\n\t\t\n\t\t<p style="white-space:pre;pointer-events:none;">${y}</p>\n\t\t<div id="images" style="display: flex; flex-direction: row; justify-content: flex-start;pointer-events:none;"></div>\n\t\t<div class="forumBtns">\n\t\t\t<p id="likeCounter">${b}</p>\n\t\t\t<button id="likeBtn" class="iconBtn"><i class="fa-regular fa-heart"></i></button>\n\t\t\t<p id="commentCounter">${E}</p>\n\t\t\t<button id="commentIcon" class="iconBtn"><i class="fa-regular fa-comment"></i></button>\n\t\t\t<button id="reportBtn" class="iconBtn"><i class="fa-regular fa-flag"></i></button>\n\t\t</div>\n\t\t</div>\n\t\t<div id="commentSection" class="commentSection">\n\t\t\t<h2 class="forumTitle">Comments</h2>\n\t\t\t<textarea class="postText" id="comment" placeholder="Add a comment..." type="text"></textarea>\n\t\t\t<button style="line-height: 0px;"id="commentBtn" class="btnLink">Comment</button>\n\t\t\t<div id="commentsList" class="commentsList">\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t`,L.includes(r)&&(C.querySelector("#likeBtn").querySelector("i").outerHTML='<i class="fa-solid fa-heart"></i>');if(r==S){let e=document.createElement("button");e.id="deleteBtn",e.className="iconBtn",e.innerHTML='<i class="fa-regular fa-trash-can"></i>',e.addEventListener("click",c),C.querySelector(".forumBtns").appendChild(e)}T.length>0&&(console.log(T),T.forEach((e=>{C.querySelector("#images").appendChild(s(e,200))})));C.querySelector("#reportBtn").addEventListener("click",w),C.querySelector("#commentIcon").addEventListener("click",q),C.querySelector("#likeBtn").addEventListener("click",a),C.querySelector("#commentBtn").addEventListener("click",u),document.querySelector("#posts").appendChild(C),B.forEach((e=>{!function(e,r){const l=new FormData;l.append("commentID",e),fetch("api/forum/loadComment",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}).then((e=>e.json())).then((e=>{console.log(e);const l=e.comment,{_id:a,author:c,authorID:s,content:d,postDate:u,comments:p,likes:y,likesCount:h,commentsCount:v}=l;console.log("Replies:",p);let S=new Date(u),L=document.createElement("div");console.log(e.pfp);let w=o(e.pfp);if(L.innerHTML=`\n\t\t\t<div>\n\t\t\t<span class="line"></span>\n\t\t\t<div style="padding: 10px; border-radius: 10px;" class="comment" id=${a}>\n\t\t\t\t<div class="inlineForumUser">\n\t\t\t\t<img id="postPfp" class="forumPfp" src="${w}"></img>\n\t\t\t\t<a class="forumUser" href="/profile?uid=${s}">${t(c)}</a>\n\t\t\t\t<p id="forumDate" class="forumUser"><i class="fa-solid fa-circle"></i> ${n(S)}</p>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<p style="font-family: 'roboto'; font-size: 19px; color: #333;">${t(d)}</p>\n\t\t\t\t<div class="forumBtns">\n\t\t\t\t\t<p style="color: #333;" id="likeCounter">${h}</p>\n\t\t\t\t\t<button id="likeBtn" class="iconBtn"><i class="fa-regular fa-heart"></i></button>\n\t\t\t\t\t<button id="reportBtn" class="iconBtn"><i class="fa-regular fa-flag"></i></button>\n\t\t\t\t\t<button id="replyBtn" class="iconBtn">Reply</button>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`,L.querySelector("#likeBtn").addEventListener("click",m),L.querySelector("#replyBtn").addEventListener("click",g),L.querySelector("#reportBtn").addEventListener("click",k),y.includes(r)&&(L.querySelector("#likeBtn").querySelector("i").outerHTML='<i class="fa-solid fa-heart"></i>'),r==s){let e=document.createElement("button");e.id="deleteBtn",e.className="iconBtn",e.innerHTML='<i class="fa-regular fa-trash-can"></i>',e.addEventListener("click",i),L.querySelector(".forumBtns").appendChild(e)}if(document.querySelector("#commentsList").appendChild(L),window.location.hash){"commentSection"==window.location.hash.substring(1)&&q()}if(p.length>0){let e=document.createElement("div"),t=`Load ${v} replies`;1===p.length&&(t=`Load ${v} reply`),e.innerHTML=`<button style="text-indent: 0px; padding: 10px;"class="faqBtn" id="openReplyBtn">${t}</button>`,e.querySelector("#openReplyBtn").addEventListener("click",f),L.querySelector(".comment").appendChild(e)}})).catch((e=>{console.log(e)}))}(e,r)}))}(e.post,e.currentUserID,e.pfp),r()):(r(),alert(e.message),window.location.replace("/forum"))})).catch((e=>{console.log(e)}))}else fetch("api/forum/loadPosts",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(h)}).then((e=>e.json())).then((e=>{if(function(){document.querySelectorAll("#showPopup").forEach((e=>{e.remove()}));let e=document.createElement("button");e.style.cssText="margin-left: auto; padding-block: 0px; height: 40px; background-color: var(--bistre); color: #fff;",e.id="showPopup",e.className="btnLink",e.innerHTML='<i style="margin-inline: 5px;" class="fa-regular fa-square-plus"></i> Create Post',document.querySelector("#forumHeader").appendChild(e),document.querySelector("#postButton").addEventListener("click",d),document.querySelector("#showPopup").addEventListener("click",v),document.querySelector("#makePost").addEventListener("click",S),document.querySelector("#closePostMainBtn").addEventListener("click",S)}(),e.status){console.log(e);let o=document.querySelector("#loadMoreBtn");e.hasMore?(o.style.display="flex",o.addEventListener("click",l)):(o.style.display="none",o.addEventListener("click",l)),e.posts.forEach((o=>{!function(e,o){const{_id:r,title:l,message:i,username:d,postDate:u,uID:m,likes:p,likesCount:f,comments:y,commentsCount:g,images:h}=e;let v=document.createElement("div"),S=new Date(u);v.innerHTML=`<div id="post">\n\t\t<span class="line"></span>\n\t\t<div class="forumPost" id=${r}>\n\t\t<div class="inlineForumUser">\n\t\t\t<img class="forumPfp" src="../images/default-pfp.jpeg"></img>\n\t\t\t<a class="forumUser" href="/profile?uid=${m}">${t(d)}</a>\n\t\t\t<p id="forumDate" class="forumUser"><i class="fa-solid fa-circle"></i> ${n(S)}</p>\n\t\t</div>\n\t\t<div class="forumTitle">\n\t\t\t<h3><a id="title" href="/forum?id=${r}">${t(l)}</a></h3>\n\t\t</div>\n\t\t\n\t\t\n\t\t<p style="white-space:pre;pointer-events:none;">${i}</p>\n\t\t<div id="images" style="display: flex; flex-direction: row; justify-content: flex-start;pointer-events:none;"></div>\n\t\t<div class="forumBtns">\n\t\t\t<p id="likeCounter">${f}</p>\n\t\t\t<button id="likeBtn" class="iconBtn"><i class="fa-regular fa-heart"></i></button>\n\t\t\t<p id="commentCounter">${g}</p>\n\t\t\t<button id="commentIcon" class="iconBtn"><i class="fa-regular fa-comment"></i></button>\n\t\t\t<button id="reportBtn" class="iconBtn"><i class="fa-regular fa-flag"></i></button>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t`,function(e,t){let n=new FormData;n.append("userID",e),fetch("api/profile/getPfp",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n)}).then((e=>e.json())).then((async e=>{e.status?t.querySelector(".forumPfp").src="/image/"+e.pfp:t.querySelector(".forumPfp").src="../images/default-pfp.jpeg"}))}(m,v),p.includes(o)&&(v.querySelector("#likeBtn").querySelector("i").outerHTML='<i class="fa-solid fa-heart"></i>');if(o==m){let e=document.createElement("button");e.id="deleteBtn",e.className="iconBtn",e.innerHTML='<i class="fa-regular fa-trash-can"></i>',e.addEventListener("click",c),v.querySelector(".forumBtns").appendChild(e)}h.length>0&&h.forEach((e=>{v.querySelector("#images").appendChild(s(e,100))}));v.querySelector("#commentIcon").addEventListener("click",L),v.querySelector("#likeBtn").addEventListener("click",a),v.querySelector("#reportBtn").addEventListener("click",w),v.addEventListener("click",M),v.addEventListener("mouseover",(()=>{document.body.style.cursor="pointer"})),v.addEventListener("mouseout",(()=>{document.body.style.cursor="default"})),document.querySelector("#posts").appendChild(v)}(o,e.currentUserID,e.pfp)})),r()}else console.log(e)})).catch((e=>{console.log(e)}))}function a(){let e=event.target;"I"!=e.nodeName&&(e=e.querySelector("i"));const t=e.closest("#post"),n=t.querySelector("#likeBtn"),o=(t.querySelector("#title"),e.closest(".forumPost").id),r=t.querySelector("#likeCounter"),l=new FormData;l.append("postID",o);try{'<i class="fa-regular fa-heart"></i>'==e.outerHTML?(e.outerHTML='<i class="fa-solid fa-heart"></i>',r.innerHTML++):(e.outerHTML='<i class="fa-regular fa-heart"></i>',r.innerHTML--),n.enabled=!1}catch(e){console.log(e)}fetch("api/forum/likePost",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}).then((e=>e.json())).then((t=>{console.log(t),"like"==t.type?e.outerHTML='<i class="fa-solid fa-heart"></i>':"unlike"==t.type&&(e.outerHTML='<i class="fa-regular fa-heart"></i>'),r.innerHTML=t.likes,n.enabled=!0})).catch((e=>{console.log(e),n.enabled=!0}))}function c(){let e=event.target.closest(".forumPost").id;const t=new FormData;t.append("postID",e),fetch("api/forum/delete-post",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}).then((e=>e.json())).then((e=>{console.log(e),e.status?(console.log("success"),window.location.replace("/forum")):(e.message,console.log("error!"))})).catch((e=>{console.log(e)}))}function i(){let e=event.target.closest(".comment").id;const t=new FormData;t.append("commentID",e),fetch("api/forum/delete-comment",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}).then((e=>e.json())).then((e=>{console.log(e),e.status?(console.log("success"),window.location.reload()):(e.message,console.log("error!"))})).catch((e=>{console.log(e)}))}function s(e,t){const n=new FileReader;let o=document.createElement("div");o.innerHTML=`\n\t\t\t<a style="margin:5px;" href="/image/${e.name}" target="_blank" rel="noopener noreferrer"><img style="width: ${t}px; height: ${t}px; border: 2px solid white; object-fit: cover;" src="/image/${e.name}"></img></a>\n\t\t`;let r=o.querySelector("img");return n.onload=function(e){r.src=e.target.result,B(r)},o}function d(){let t=document.querySelector("#title").value,n=tinymce.get("message").getContent();const o=new FormData;o.append("title",t),o.append("message",n);document.querySelector("#addImage");if(console.log("All Files Uploaded:",e),e.length>0)for(let t=0;t<e.length;t++)o.append("files",e[t]);fetch("api/forum/post",{method:"post",body:o}).then((e=>e.json())).then((e=>{if(console.log(e),e.status)console.log("success"),window.location.replace(`/forum?id=${e.id}`);else switch(e.message){case"Please make sure all the fields are filled in":break;case"Upload failed because file size too large!":let{maxSize:t,filename:n,uploadedSize:o}=e;alert(`Upload failed because ${n} was bigger than ${t}MB [${o.toFixed(1)}MB]\n\nUpgrade your plan for a larger upload size!`)}})).catch((e=>{console.log(e)}))}function u(){let e=document.querySelector("#comment").value,t=event.target.closest("#post").querySelector(".forumPost").id;console.log("Post ID: "+t);const n=new FormData;n.append("content",e),n.append("postID",t),fetch("api/forum/comment",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n)}).then((e=>e.json())).then((e=>{console.log(e),location.reload()})).catch((e=>{console.log(e)}))}function m(){let e=event.target;"I"!=e.nodeName&&(e=e.querySelector("i"));const t=e.closest(".comment"),n=t.querySelector("#likeBtn"),o=e.closest(".comment").id,r=t.querySelector("#likeCounter"),l=new FormData;l.append("commentID",o);try{'<i class="fa-regular fa-heart"></i>'==e.outerHTML?(e.outerHTML='<i class="fa-solid fa-heart"></i>',r.innerHTML++):(e.outerHTML='<i class="fa-regular fa-heart"></i>',r.innerHTML--),n.enabled=!1}catch(e){console.log(e)}fetch("api/forum/likeComment",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}).then((e=>e.json())).then((t=>{console.log(t),"like"==t.type?e.outerHTML='<i class="fa-solid fa-heart"></i>':"unlike"==t.type&&(e.outerHTML='<i class="fa-regular fa-heart"></i>'),r.innerHTML=t.likes,n.enabled=!0})).catch((e=>{console.log(e),n.enabled=!0}))}function p(){let e=event.target,t=e.closest(".comment").parentElement.querySelectorAll("#reply");t.forEach((e=>e.remove()));let n=`Load ${t.length} replies`;1===t.length&&(n=`Load ${t.length} reply`),e.innerHTML=n,e.removeEventListener("click",p),e.addEventListener("click",f)}function f(){let e=event.target;e.removeEventListener("click",f);let r=e.innerHTML;e.innerHTML="Loading...";let l=e.closest(".comment").id,a=e.closest(".comment"),c=new FormData;c.append("commentID",l),fetch("api/forum/get-replies",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(c)}).then((e=>e.json())).then((l=>{if(l.status){e.innerHTML="Hide Replies",e.removeEventListener("click",f),e.addEventListener("click",p);let r=l.replies,c=l.uid;console.log(r),r.forEach((e=>{let r=e.reply,l=e.pfp,s=o(l);const{_id:d,author:u,authorID:p,content:y,postDate:h,comments:v,likes:S,likesCount:L,commentsCount:q}=r;let w=new Date(h),b=document.createElement("div");if(b.id="reply",b.style.marginLeft="5%",b.innerHTML=`\n\t\t\t\t\t<div>\n\t\t\t\t\t<span class="line"></span>\n\t\t\t\t\t<div style="padding: 10px; border-radius: 10px;" class="comment" id=${d}>\n\t\t\t\t\t\t<div class="inlineForumUser">\n\t\t\t\t\t\t<img id="postPfp" class="forumPfp" src="${s}"></img>\n\t\t\t\t\t\t<a class="forumUser" href="/profile?uid=${p}">${t(u)}</a>\n\t\t\t\t\t\t<p id="forumDate" class="forumUser"><i class="fa-solid fa-circle"></i> ${n(w)}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p style="white-space:pre;font-family: 'roboto';font-size: 19px;color: #333;pointer-events: none;">${t(y)}</p>\n\t\t\t\t\t\t<div class="forumBtns">\n\t\t\t\t\t\t\t<p style="color: #333;" id="likeCounter">${L}</p>\n\t\t\t\t\t\t\t<button id="likeBtn" class="iconBtn"><i class="fa-regular fa-heart"></i></button>\n\t\t\t\t\t\t\t<button id="reportBtn" class="iconBtn"><i class="fa-regular fa-flag"></i></button>\n\t\t\t\t\t\t\t<button id="replyBtn" class="iconBtn">Reply</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`,b.querySelector("#likeBtn").addEventListener("click",m),b.querySelector("#replyBtn").addEventListener("click",g),b.querySelector("#reportBtn").addEventListener("click",k),S.includes(c)&&(b.querySelector("#likeBtn").querySelector("i").outerHTML='<i class="fa-solid fa-heart"></i>'),c==p){let e=document.createElement("button");e.id="deleteBtn",e.className="iconBtn",e.innerHTML='<i class="fa-regular fa-trash-can"></i>',e.addEventListener("click",i),b.querySelector(".forumBtns").appendChild(e)}if(v.length>0){let e=document.createElement("div"),t=`Load ${q} replies`;1===v.length&&(t=`Load ${q} reply`),e.innerHTML=`<button style="text-indent: 0px; padding: 10px;"class="faqBtn" id="openReplyBtn">${t}</button>`,e.querySelector("#openReplyBtn").addEventListener("click",f),b.querySelector(".comment").appendChild(e)}a.insertAdjacentElement("afterend",b)}))}else e.innerHTML=r,e.onclick=f})).catch((t=>{console.log(t),e.innerHTML=r,e.onclick=f}))}function y(){console.log("close");let e=event.target;e.closest(".comment").querySelectorAll("#replyDiv").forEach((e=>e.remove())),e.innerHTML="Reply",e.removeEventListener("click",y),e.addEventListener("click",g)}function g(){let e=event.target;e.innerHTML="Close";let t=e.closest(".comment");t.querySelectorAll("#replyDiv").forEach((e=>e.remove()));t.id;let n=document.createElement("div");n.id="replyDiv",n.innerHTML='<input id="replyInput" placeholder="Add your reply..."class="postText" type="text"><button style="margin-left: auto;margin-right:5%;text-indent: 0px; padding: 10px;" class="faqBtn" id="replySubmitBtn">Reply</button>',n.querySelector("#replySubmitBtn").addEventListener("click",h),t.querySelector(".forumBtns").insertAdjacentElement("afterend",n),e.removeEventListener("click",g),e.addEventListener("click",y)}function h(){let e=event.target,t=e.closest("div").querySelector("#replyInput").value,n=e.closest(".comment").id,o=document.querySelector(".forumPost").id;const r=new FormData;r.append("content",t),r.append("commentID",n),r.append("postID",o),fetch("api/forum/reply",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r)}).then((e=>e.json())).then((e=>{console.log(e),location.reload()})).catch((e=>{console.log(e)}))}function v(){document.getElementById("makePost").style="display: flex !important;",document.getElementById("postInformation").style="display: flex !important;"}function S(){document.getElementById("makePost").style="display: none !important;",document.getElementById("postInformation").style="display: none !important;"}function L(){let e=event.target.closest(".forumPost").id;location.href=`forum?id=${t(e)}#commentSection`}function q(){const e=document.getElementById("commentSection");e&&e.scrollIntoView({behavior:"smooth"})}function w(){const e=event.target.closest(".forumPost"),t=e.id,n=e.querySelector(".forumUser").innerHTML;document.querySelector("#reportTitle").innerHTML=`Report <a href="/forum?id=${t}">${n}'s Post</a>`,document.querySelector("#makeReport").style.display="flex",document.querySelector("#reportInformation").style.display="flex"}function k(){const e=event.target.closest(".comment").id,t=post.querySelector(".forumUser").innerHTML;document.querySelector("#reportTitle").innerHTML=`Report <a href="/forum?id=${e}">${t}'s Comment</a>`,document.querySelector("#reportTitle").name=e,document.querySelector("#makeReport").style.display="flex",document.querySelector("#reportInformation").style.display="flex"}function b(){document.querySelector("#makeReport").style.display="none",document.querySelector("#reportInformation").style.display="none"}l(),document.querySelector("#makeReport").addEventListener("click",b),document.querySelector("#submitReportButton").addEventListener("click",(function(){let e=[];const t=document.querySelectorAll(".reportCheckbox"),n=document.querySelector("#reportMessage").value,o=document.querySelector("#reportTitle").querySelector("a").href.split("=")[1];console.log(o),t.forEach((t=>{t.checked&&e.push(t.id)}));const r=new FormData;r.append("reasons",e),r.append("message",n),r.append("postID",o),b(),fetch("api/forum/report",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r)}).then((e=>e.json())).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}));document.getElementById("imageUploadPreview");function B(e){e.onload=function(){let t=parseFloat(e.style.height.replace("px","")),n=e.naturalHeight,o=(e.naturalWidth/n).toFixed(2);e.style.width=o*t+"px"}}function E(){let t=event.target.parentElement.querySelector("img").id;event.target.parentElement.remove(),console.log(t),e=e.filter((e=>e.name!==t)),console.log(e)}function T(){console.log("Uploading...");const t=Array.from(event.target.files);e=e.concat(t),console.log(e),t.length>0&&t.forEach((e=>{if(e&&e.type.startsWith("image/")){const t=new FileReader;let n=document.createElement("div");n.innerHTML=`\n\t\t\t\t\t<img id="${e.name}" style="width: 150px; height: 150px; border: 2px solid grey; object-fit: cover;"></img>\n\t\t\t\t\t<button>Delete</button> \n\t\t\t\t`,n.querySelector("button").addEventListener("click",E);let o=n.querySelector("img");t.onload=function(e){o.src=e.target.result,B(o)},t.readAsDataURL(e),document.querySelector("#images").appendChild(n)}else alert("Please upload a valid image file.")}))}function x(e){let t=e.currentTarget,n=t.querySelector("#faqAns"),o=t.querySelector("#faqIcon"),r=n.querySelector("p");"block"===window.getComputedStyle(n).display?(n.style.display="none",t.style.height="50px",t.style.color="#333",anime({targets:o,rotateX:0,easing:"linear",duration:300})):(n.style.display="block",r.style.display="block",t.style.height="fit-content",t.style.color="#333",anime({targets:o,rotateX:180,easing:"linear",duration:300}))}async function C(){let e=event.target;document.querySelectorAll(".filterBtn").forEach((e=>{e.style.backgroundColor="#fff",e.id="sortUnclicked"})),e.style.backgroundColor="#f2f2f2",e.id="sortClicked",async function(){let e=document.querySelector("#posts");document.querySelector("#loadMoreBtn").style.display="none",e.innerHTML=""}(),l()}function M(){console.log(event.target),"forumPost"==event.target.className&&(location.href=window.location.href+`?id=${event.target.id}`)}document.getElementById("addImage").addEventListener("change",T),document.getElementById("dropArea").addEventListener("dragover",(function(e){e.preventDefault()})),document.getElementById("dropArea").addEventListener("drop",T),document.querySelector("#removeImageBtn").addEventListener("click",(function(){document.getElementById("imageUploadPreview").setAttribute("src",""),document.querySelector(".submitImageText").style.display="flex",document.querySelector(".imageUploadPreviewDiv").style.display="none",document.querySelector("#removeImageBtn").style.display="none"})),document.querySelectorAll(".faqBtn").forEach((e=>{e.addEventListener("click",x)})),document.querySelectorAll(".filterBtn").forEach((e=>{e.addEventListener("click",C)}))})();