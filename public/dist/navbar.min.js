(()=>{function e(){const e=window.location.href,n=e.substring(e.lastIndexOf("/")+1);return""===n||"index"===n.toLowerCase()||"settings"===n.toLowerCase()||"signup"===n.toLowerCase()||"login"===n.toLowerCase()||"forgot-password"===n.toLowerCase()}!function(){let e=document.createElement("nav");e.innerHTML='\n\t<div class="construction" style="display: none;">\n\t<p id="constructionDesc"><i style="margin-inline:5px;" class="fa-solid fa-wrench"></i> sorry that page is still under construction</p>\n\t</div>\n\t<nav id="nav">\n    <a class="navLogo" href="/">\n            <img src="../images/webLogo.png" alt="">\n        </a>\n        <div class="nav-links">\n\t\t\t<span id="navSep" class="line"></span>\n            <a href="/" class="nav-link"><i id="responsiveNavIcon" class="fa-solid fa-house"></i> Home</a>\n\t\t\t<a id="logoutBtn2" href="logout" class="navProfileDropLink"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>\n            <div class="navLinkDrop" style="display:none; cursor: default; line-height: 60px;">\n                <p>Community</p>\n                <i class="material-icons">keyboard_arrow_down</i>\n            <div class="navDrop">\n                <a style="border-radius: 4px 4px 0px 0px;" href="forum" class="dropLink"><i class="fa-regular fa-comments" disabled></i> Forum</a>\n                <a href="devotions" class="dropLink"><i class="fa-regular fa-calendar"></i> Daily Devotions</a>\n                <a href="biblePlans" class="dropLink"><i class="fa-solid fa-book-bible"></i> Bible Plans</a>\n                <a style="border-radius: 0px 0px 4px 4px" href="cowboyStories" class="dropLink"><i class="fa-solid fa-hat-cowboy-side"></i> Cowboy Stories</a>\n            </div>\n        </div>\n            <a id="signupNav" href="login" class="nav-link"><i id="responsiveNavIcon" class="fa-solid fa-right-to-bracket"></i></a>\n            <div href="" style="display: none;"  id="navProfile" class="navProfile">\n            <div class="navProfileUser">    \n                <p style="margin-inline: 10px;" id="username"></p>\n                <img id="pfp" src="images/default-pfp.jpeg" alt="">\n                <i class="fa-solid fa-chevron-down"></i>\n            </div>\n            <div class="navProfileDrop">\n                <a id="profile" class="navProfileDropLink"><i class="fa-solid fa-user"></i> Profile</a>\n                <a href="settings" class="navProfileDropLink"><i class="fa-solid fa-gear"></i> Settings</a>\n                <a id="navSub" style="display: none;" class="navProfileDropLink"><i class="fa-solid fa-credit-card"></i> Subscription</a>\n                <a id="logoutBtn1" href="logout" class="navProfileDropLink"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>\n            </div>\n        </div>\n\t\t</div>\n        \n        <button class="navIcon" id="burgerMenu"><i class="fa-solid fa-bars"></i></button>\n    </nav>\n\t<div id="spinner" style="background-color: white; width: 100%; height: 100%; display: none; justify-content: center; align-items: center; z-index: 100;">\n        <l-ring\n        size="40"\n        stroke="5"\n        bg-opacity="0"\n        speed="2"\n        color="black" \n        ></l-ring>\n    </div>\n    ',document.body.innerHTML=e.innerHTML+document.body.innerHTML;let n=document.createElement("script");n.type="module",n.src="https://cdn.jsdelivr.net/npm/ldrs/dist/auto/ring.js",console.log(n),document.head.appendChild(n)}(),fetch("api/auth/isLoggedIn",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>e.json())).then((async n=>{if(n.status)if((n.subscribed||n.admin)&&n.isVerified){if(document.querySelector("#username").innerHTML=n.username.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),document.querySelector(".navDrop").style="right: -35px;",document.querySelector("#signupNav").style="display: none; !important",document.querySelector("#navProfile").style="display: flex;",document.querySelector("#logoutBtn1").style="display: flex; !important",document.querySelector(".navLinkDrop").style.display="flex",document.querySelector("#profile").setAttribute("href",`profile?uid=${n.uid}`),n.pfp&&(document.querySelector("#pfp").src=`/image/${n.pfp}`),n.admin){let e=document.createElement("a");e.className="navProfileDropLink",e.innerHTML='<i class="fa-solid fa-chart-line"></i> Admin Dashboard',e.href="admin",document.querySelector("#navSub").insertAdjacentElement("afterend",e)}}else e()||(n.isVerified||alert("Your account is not verified. Check your email to verify!"),location.replace("/login"));else document.querySelector("#signupNav").innerHTML='<i id="responsiveNavIcon" class="fa-solid fa-right-to-bracket"></i> Login',document.querySelector(".navDrop").style="right: -35px",document.querySelector(".navProfile").style="display: none !important;",document.querySelector(".navLinkDrop").style.display="none",document.querySelector("#logoutBtn2").style="display: none !important;",document.querySelector("#navSep").style="display: none !important;",e()||location.replace("/login")})).catch((e=>{console.log(e)})),document.querySelector(".navIcon").addEventListener("click",(function(){"flex"==document.querySelector(".nav-links").style.display?(document.querySelector(".nav-links").style.display="none",document.querySelector("#burgerMenu").innerHTML='<i class="fa-solid fa-bars"></i>'):(document.querySelector(".nav-links").style.display="flex",document.querySelector("#burgerMenu").innerHTML='<i class="fa-solid fa-xmark"></i>',anime({targets:".nav-links",translateX:[-100,0],opacity:[0,1],easing:"easeInOutQuad",duration:200}))})),function(){let e=(e=>{let n=null;return document.cookie.split(";").forEach((t=>{if(t.includes(`${e}=`))return n=t.split(`${e}=`)[1],n})),n})("pfp");document.querySelector("#pfp").src=e?`/image/${e}`:"../images/default-pfp.jpeg",fetch("api/profile/getPfp",{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>e.json())).then((async e=>{e.status?document.querySelector("#pfp").src=`/image/${e.pfp}`:document.querySelector("#pfp").src="../images/default-pfp.jpeg"})).catch((e=>{console.log(e)}))}();let n=["forum","settings","admin"];document.addEventListener("DOMContentLoaded",(function(){for(let e=0;e<document.querySelectorAll(".dropLink").length;e++)console.log(document.querySelectorAll(".dropLink")[e].getAttribute("href")),n.includes(document.querySelectorAll(".dropLink")[e].getAttribute("href"))||document.querySelectorAll(".dropLink")[e].addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".construction").style="display: block !important;",document.querySelector("#nav").style="margin-top: 51px;",anime({targets:".construction, #constructionDesc",easing:"easeInOutQuad",translateY:[-100,0],opacity:[0,1],duration:200})}))})),document.addEventListener("DOMContentLoaded",(function(){}));const t=document.querySelector("#nav");window.addEventListener("scroll",(()=>{const e=window.scrollY;t.style.backgroundColor=e>0?"#00000085":"var(--bistre)"}))})();